{
    "dashboard": {
        "title": "SLO Tracker",
        "tags": [
            "slo",
            "observability"
        ],
        "timezone": "browser",
        "panels": [
            {
                "id": 1,
                "title": "Availability SLO (99.9% target)",
                "type": "gauge",
                "targets": [
                    {
                        "expr": "100 * (1 - (sum(rate(copilot_requests_total{status_code=~\"5..\"}[30d])) / sum(rate(copilot_requests_total[30d]))))",
                        "legendFormat": "Availability %"
                    }
                ],
                "gridPos": {
                    "x": 0,
                    "y": 0,
                    "w": 8,
                    "h": 8
                },
                "fieldConfig": {
                    "defaults": {
                        "thresholds": {
                            "steps": [
                                {
                                    "value": 0,
                                    "color": "red"
                                },
                                {
                                    "value": 99.5,
                                    "color": "yellow"
                                },
                                {
                                    "value": 99.9,
                                    "color": "green"
                                }
                            ]
                        },
                        "min": 99,
                        "max": 100,
                        "unit": "percent"
                    }
                }
            },
            {
                "id": 2,
                "title": "Latency SLO (p95 < 1s target)",
                "type": "gauge",
                "targets": [
                    {
                        "expr": "histogram_quantile(0.95, rate(copilot_request_duration_seconds_bucket[30d]))",
                        "legendFormat": "p95 Latency"
                    }
                ],
                "gridPos": {
                    "x": 8,
                    "y": 0,
                    "w": 8,
                    "h": 8
                },
                "fieldConfig": {
                    "defaults": {
                        "thresholds": {
                            "steps": [
                                {
                                    "value": 0,
                                    "color": "green"
                                },
                                {
                                    "value": 0.8,
                                    "color": "yellow"
                                },
                                {
                                    "value": 1.0,
                                    "color": "red"
                                }
                            ]
                        },
                        "min": 0,
                        "max": 2,
                        "unit": "s"
                    }
                }
            },
            {
                "id": 3,
                "title": "Quality SLO (RAG precision > 90%)",
                "type": "gauge",
                "targets": [
                    {
                        "expr": "avg_over_time(copilot_rag_precision[30d])",
                        "legendFormat": "Avg RAG Precision"
                    }
                ],
                "gridPos": {
                    "x": 16,
                    "y": 0,
                    "w": 8,
                    "h": 8
                },
                "fieldConfig": {
                    "defaults": {
                        "thresholds": {
                            "steps": [
                                {
                                    "value": 0,
                                    "color": "red"
                                },
                                {
                                    "value": 0.85,
                                    "color": "yellow"
                                },
                                {
                                    "value": 0.90,
                                    "color": "green"
                                }
                            ]
                        },
                        "min": 0,
                        "max": 1,
                        "unit": "percentunit"
                    }
                }
            },
            {
                "id": 4,
                "title": "Error Budget Remaining (30-day window)",
                "type": "graph",
                "targets": [
                    {
                        "expr": "100 * (1 - (sum(increase(copilot_requests_total{status_code=~\"5..\"}[30d])) / (43.2 * 60)))",
                        "legendFormat": "Availability Budget %"
                    },
                    {
                        "expr": "100 * (1 - (sum(copilot_request_duration_seconds_bucket{le=\"1.0\"}[30d]) / sum(copilot_request_duration_seconds_count[30d])))",
                        "legendFormat": "Latency Budget %"
                    }
                ],
                "gridPos": {
                    "x": 0,
                    "y": 8,
                    "w": 24,
                    "h": 8
                },
                "fieldConfig": {
                    "defaults": {
                        "thresholds": {
                            "steps": [
                                {
                                    "value": 0,
                                    "color": "red"
                                },
                                {
                                    "value": 20,
                                    "color": "yellow"
                                },
                                {
                                    "value": 50,
                                    "color": "green"
                                }
                            ]
                        }
                    }
                }
            },
            {
                "id": 5,
                "title": "SLO Compliance Trend (7 days)",
                "type": "graph",
                "targets": [
                    {
                        "expr": "100 * (1 - (rate(copilot_requests_total{status_code=~\"5..\"}[1h]) / rate(copilot_requests_total[1h])))",
                        "legendFormat": "Availability %"
                    },
                    {
                        "expr": "histogram_quantile(0.95, rate(copilot_request_duration_seconds_bucket[1h]))",
                        "legendFormat": "p95 Latency (s)"
                    },
                    {
                        "expr": "avg_over_time(copilot_rag_precision[1h]) * 100",
                        "legendFormat": "RAG Precision %"
                    }
                ],
                "gridPos": {
                    "x": 0,
                    "y": 16,
                    "w": 24,
                    "h": 8
                }
            }
        ],
        "refresh": "1m",
        "time": {
            "from": "now-7d",
            "to": "now"
        }
    }
}